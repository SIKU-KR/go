## 블록

선언문이 있는 각각의 공간을 **블록**이라 부른다.

함수 외부에서 선언된 변수, 상수, 타입, 함수는 **패키지 블록** 범위에 속한다

프로그램에 `import` 문을 사용하여 패키지의 접근을 가능하도록한다.

해당 이름들은 **파일 블록** 내에 존재한다.

모든 중괄호 `{}`세트는 서로 다른 블록을 정의하며 Go의 제어 구조가 자체 블록을 정의한다.

## 섀도잉 변수

```go
func main() {
    x := 10
    if x > 5 {
        fmt.Println(x) // 10
        x := 5
        fmt.Println(x) // 5
    }
    fmt.Println(x) // 10
}
```

섀도잉 변수는 포함된 블록내에 이름이 같은 변수가 있는 것을 의미한다. 섀도우 변수가 존재하는 한 섀도잉 대상인 변수는 접근할 수 없다.

위 코드는 `:=` 연산자를 사용하는 것이 정확히 어떤 변수를 대상으로 일어나는지 불명확하기 때문에 피해야하는 상황이다.

> `:=`를 사용할 때 우연히 섀도잉된 변수일 수 있다

### 섀도잉 변수 검출

섀도잉으로 미묘한 버그를 발생시킬 수 있으므로, 작성한 프로그램에 어떤 변수를 섀도잉되지 않은 것을 확인해주는 좋은 아이디어가 있다

> Shadow 린터를 설치하여 섀도잉을 검출하자.

```sh
$ go install golang.org/x/tools/go/analysis/passes/shadow/cmd/shadow@latest
```

이때 `Makefile`로 프로그램을 빌드한다면 vet 작업에서 `shadow`를 포함하자
```makefile
vet:
    go vet ./...
    shadow ./...
.PHONY:vet
```


